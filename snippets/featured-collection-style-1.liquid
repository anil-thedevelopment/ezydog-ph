<!-- featured-collection-style-1 -->
  <div class="section-inner-{{ section.id }} section-x-padding-only  {% if section.settings.separate_section_with_border %}bordered-section{% endif %} {% if section.settings.apply_bottom_padding %} section-pt {% endif %} {% if section.settings.apply_bottom_padding %} section-pb {% endif %}">

    {% if section.settings.collection.metafields.custom.short_description != blank %}
      {% assign col_description = section.settings.collection.metafields.custom.short_description.value %}
    {% else %}
      {% assign col_description =  section.settings.collection.description | truncate: 80 %}
    {% endif %}
    
    <div class="">
      {%- assign wrapper_carousel_id = 'featured-collections-carousel-' | append: section.id -%}

      <div class="section-stack section-stack-{{ section.id }}">
        <div class="v-stack text-left hidden-tablet-and-up">
            <p class="Barlow-Medium dfs-30 mfs-30 text-mb-sm">{{ section.settings.collection.title }}</p>
            <p class="short-description-{{ section.id }} dfs-14 mfs-14">{{ col_description }}</p>
        </div>

        <div class="collection-wrapper-{{section.id}}">
          <div class="collection-detail-{{section.id}} hidden-phone">
            <p class="heading-{{ section.id }} Barlow-Medium dfs-30 mfs-30 text-mb-sm">{{ section.settings.collection.title }}</p>
            <p class="short-description-{{ section.id }} dfs-14 mfs-14">{{ col_description }}</p>

            {%- if section.settings.link_text != blank -%}
              <div class="justify-self-start">
                
                <a  data-url="{{  section.settings.link_url | default: section.settings.collection.url  }}" class="button">{{ section.settings.link_text }}</a>
              </div>
            {%- endif -%}
          </div>

          <div class="feat-col-carousel-{{ section.id }}">
            {%- for product in section.settings.collection.products limit: section.settings.products_count -%}
              <div class="product-card-wrapper-{{ section.id }}">
              
              {%- render 'product-card', product: product, reveal: should_reveal, hide_product_information: section.settings.hide_product_information, block: block -%}
              </div>
            {%- endfor -%}
          </div>
          <div class="justify-self-start hidden-tablet-and-up">
            <a data-url="{{  section.settings.link_url | default: section.settings.collection.url  }}" class="button">{{ section.settings.link_text }}</a>
          </div>
        </div>
      </div>

    </div>
  </div>
<style>
  #product-list-{{ section.id }}{}
  .collection-detail-{{section.id}}{ padding-right: 2em; }
  @media screen and (min-width: 640px){ .collection-wrapper-{{section.id}}{ display: grid; gap: 3em; grid-template-columns: 1fr 3fr; } }
  .heading-{{ section.id }}{ margin-bottom: 10px; }
  .short-description-{{ section.id }}{ padding-bottom: 16px; }
  
  .feat-col-carousel-{{ section.id }}{ position: relative; display: grid; grid-template-column: 1fr 1fr 1fr; }
  .feat-col-carousel-{{ section.id }}  > .slick-dots { display: none !important; } 

  .product-card-wrapper-{{ section.id }}{
    margin-right: 8px; 
  }
    
  @media screen and (max-width: 640px){
  .section-inner-{{ section.id }}{ padding-right: 0 !important; }
  .section-stack-{{ section.id }}{ gap: 24px; }
  .short-description-{{ section.id }}{ max-width: 90%; }
  .feat-col-carousel-{{ section.id }} { margin-bottom: 3em !important; }
   .slick-custom-arrow-{{section.id}}{ display: none !important; } 
  }

  /* @media screen and (min-width: 640px) and (max-width: 900px){
    .slick-custom-arrow-{{section.id}}{ top: 13.5vw; bottom: unset; }
  }

  @media screen and (min-width: 900px) and (max-width: 999px){
    .slick-custom-arrow-{{section.id}}{ top: 8.3vw; bottom: unset; }
  }

    @media screen and (min-width: 1000px) {
    .slick-custom-arrow-{{section.id}}{ top: 9.6887vw; bottom: unset; }
  }
  
    @media screen and (min-width: 1600px) {
    .slick-custom-arrow-{{section.id}}{ top: 154px; bottom: unset; }
  } */
  
  .slick-custom-arrow-next.slick-custom-arrow-{{section.id}} { right: -9px; }
  .slick-custom-arrow-prev.slick-custom-arrow-{{section.id}} { left: -17px; }

  
</style>


<script>
    $('.feat-col-carousel-{{ section.id }}').slick({
    dots: false,
    infinite: false,
    speed: 300,
    slidesToShow: 3,
    slidesToScroll: 1,
    adaptiveHeight: true,
    arrows: true,
    prevArrow: '<img class="slick-custom-arrow-prev slick-custom-arrow-{{section.id}}" src="{{ 'carousel-left.png' | asset_url }}" alt="Previous">', 
    nextArrow: '<img class="slick-custom-arrow-next slick-custom-arrow-{{section.id}}" src="{{ 'carousel-right.png' | asset_url }}" alt="next">', 
    responsive: [
    {
        breakpoint: 900,
        settings: {
          dots: true,
          slidesToShow: 2,
          slidesToScroll: 1
        }
      },
      {
        breakpoint: 640,
        settings: {
          dots: true,
          slidesToShow: 1.1,
          slidesToScroll: 1
        }
      }
    ]
  });

function adjustNavigationButtons() {
  var imageHeight = $('.feat-col-carousel-{{ section.id }} .slick-list .slick-track .slick-active img').first().height();
  var arrowHeight = $('.slick-custom-arrow-prev.slick-custom-arrow-{{section.id}}').height();
  var buttonTopOffset = (imageHeight / 2) - (arrowHeight / 2);

  $('.slick-custom-arrow-prev.slick-custom-arrow-{{section.id}}').css('top', buttonTopOffset);
  $('.slick-custom-arrow-next.slick-custom-arrow-{{section.id}}').css('top', buttonTopOffset);
}

$(window).on('resize', adjustNavigationButtons);
$('.feat-col-carousel-{{ section.id }}').on('setPosition', adjustNavigationButtons);

$(document).ready(adjustNavigationButtons);
</script>